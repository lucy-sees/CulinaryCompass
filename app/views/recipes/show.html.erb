<% if @recipe.public || @recipe.user == current_user %>
  <%= render @recipe %>

  <% if @recipe.user == current_user %>
    <%= form_with(model: @recipe, url: toggle_public_recipe_path(@recipe), method: :put, local: true) do |form| %>
      <%= form.check_box :public %>
      <%= form.label :public, 'Public' %>
      <%= form.submit 'Update' %>
    <% end %>
  <% end %>

  <div class="mt-4 d-flex align-items-center gap-2">
    <%= link_to "Edit this recipe", edit_recipe_path(@recipe), class: 'btn btn-primary mr-2' %>|
    <%= link_to "Back to recipes", recipes_path, class: 'btn btn-secondary mr-2' %>|
    <%= button_to "Delete this recipe", @recipe, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %>
  </div>
<% else %>
  <h4>This recipe is private.</h4>
<% end %>
